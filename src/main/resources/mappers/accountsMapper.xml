<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.good.mapper.accountsMapper">

	<!--
	mybatis-config.xml의 typeAlias에 등록해두지 않았다면
	<select id="selectAccounts" resultType="com.good.dto.AccountsVO" >
		...
	</select>
	이렇게 해야 한다.
	-->

	<select id="selectAccounts" resultType="AccountsVO">
		SELECT * FROM accounts
	</select>

	<!-- 회원 가입 -->
	<insert id="insertAccounts" parameterType="AccountsVO">
	INSERT INTO
		accounts(
				email,
				pwd,
				nickname,
				picture,
				footer,
				reg_date,
				mod_date)
		VALUES(
			#{email},
			PASSWORD(#{pwd}),
			#{nickname},
			#{picture},
			#{footer},
			now(),
			now())
	</insert>

	<!-- 이메일 체크 -->
	<select id="checkEmail" parameterType="String" resultType="Integer">
	    SELECT
	      COUNT(*)
	    FROM
	      accounts
	    WHERE
	      email = #{email}
	</select>

	<!-- 닉네임 체크 -->
	<select id="checkNickname" parameterType="String" resultType="Integer">
	    SELECT
	      COUNT(*)
	    FROM
	      accounts
	    WHERE
	      nickname = #{nickname}
	</select>

	<select id="login" resultType="AccountsVO">
		 select * from accounts where email = #{email} and pwd = #{pwd}
	</select>

</mapper>
